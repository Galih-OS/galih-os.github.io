<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Protected Page — Masukkan Password</title>
  <style>
    body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, sans-serif; display:flex; min-height:100vh;
           align-items:center; justify-content:center; background:#f5f7fa; margin:0; }
    .card { background:white; padding:22px; border-radius:12px; box-shadow:0 6px 24px rgba(30,30,30,0.08); width:360px; }
    input[type="password"]{ width:100%; padding:10px; margin-top:8px; border-radius:8px; border:1px solid #ddd; }
    button{ margin-top:12px; width:100%; padding:10px; border-radius:8px; border:none; cursor:pointer; }
    .ok { color:green; margin-top:12px; }
    .err { color:#b00020; margin-top:12px; }
  </style>
</head>
<body>
  <div class="card" role="main" aria-labelledby="title">
    <h2 id="title">Masukkan Password</h2>
    <p>Untuk memperoleh kata sandi, hubungi pemilik: 
      <a href="https://t.me/galihos" target="_blank" rel="noopener">t.me/galihos</a>
    </p>

    <label for="pw">Password:</label>
    <input id="pw" type="password" autocomplete="current-password" placeholder="Masukkan password..." />
    <button id="checkBtn">Buka Halaman</button>

    <div id="msg" aria-live="polite"></div>
  </div>

<script>
const PASSWORD_HASH = '85e248fbc76bafa65c5dff412f893d8e88b5dfab0ec299332c643b99c720b4ac';

// Fungsi bantu untuk ubah ArrayBuffer ke hex
function buf2hex(buffer) {
  return [...new Uint8Array(buffer)]
    .map(b => b.toString(16).padStart(2, '0'))
    .join('');
}

// Fungsi hashing SHA-256
async function sha256Hex(str) {
  const enc = new TextEncoder();
  const data = enc.encode(str);
  const hashBuffer = await crypto.subtle.digest('SHA-256', data);
  return buf2hex(hashBuffer);
}

// Saat tombol ditekan
document.getElementById('checkBtn').addEventListener('click', async () => {
  const pw = document.getElementById('pw').value || '';
  const msgEl = document.getElementById('msg');
  msgEl.textContent = '';
  msgEl.className = '';

  if (!pw) {
    msgEl.textContent = 'Masukkan password terlebih dahulu.';
    msgEl.className = 'err';
    return;
  }

  try {
    const hashed = await sha256Hex(pw);
    if (hashed === PASSWORD_HASH) {
      msgEl.textContent = 'Password benar — mengarahkan ke halaman tujuan...';
      msgEl.className = 'ok';
      
      // Delay sebentar lalu redirect
      setTimeout(() => {
        window.location.href = "https://id.jobstreet.com/id/profile/galihokta-siwiskom-Hxxlnqm1Gk";
      }, 1000);
    } else {
      msgEl.textContent = 'Password salah. Silakan hubungi pemilik melalui t.me/galihos.';
      msgEl.className = 'err';
    }
  } catch (err) {
    console.error(err);
    msgEl.textContent = 'Terjadi kesalahan hashing.';
    msgEl.className = 'err';
  }
});
</script>
</body>
</html>
