<!DOCTYPE html>
<html>
<head>
    <title>Terbilang</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <style>
        body {
            background-color: #f8f9fa;
        }
        .container {
            max-width: 600px;
            margin-top: 50px;
            padding: 20px;
            background: #ffffff;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        #copyButton { display: none; }
    </style>

    <link rel="shortcut icon" href="img/icon.png">
</head>

<body>
    <div class="container">

        <!-- TEMPAT ALERT MUNCUL -->
        <div id="alertArea"></div>

        <center><h3>Versi Lama</h3></center>
        <center><h3>Konversi Angka ke Terbilang Rupiah</h3></center>
        <center><h3>Pembatasan Terbilang Hanya s/d Triliun</h3></center>
        <br>

        <form id="convertForm">
            <div class="form-group">
                <label>Masukkan Angka, bisa menggunakan (koma atau titik):</label>
                <input type="text" id="number" class="form-control" required>
            </div>
            <button type="submit" class="btn btn-primary">Konversi</button>
            <button type="button" id="copyButton" class="btn btn-secondary ml-2">Copy</button>
            <button type="button" id="resetButton" class="btn btn-danger ml-2">Reset</button>
        </form>

        <div id="result" class="mt-4"></div>

        <hr>

        <p class="mb-0 text-center text-muted">©
            <script>document.write(new Date().getFullYear())</script>
            by <a href="https://galih-os.github.io/" target="_blank" class="text-muted">mrOS</a> | Telegram :

            <a href="https://t.me/galihos" target="_blank">
                <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24">
                    <path d="M9.78 18.65l.28-4.23l7.68-6.92c.34-.31-.07-.46-.52-.19L7.74 13.3L3.64 12c-.88-.25-.89-.86.2-1.3l15.97-6.16c.73-.33 1.43.18 1.15 1.3l-2.72 12.81c-.19.91-.74 1.13-1.5.71L12.6 16.3l-1.99 1.93c-.23.23-.42.42-.83.42z" fill="currentColor"/>
                </svg>
            </a>

            <br><br>
            <i id="google_translate_element"></i>
        </p>

        <a href="terbilang.html" style="display:inline-block; padding:7px 12px; background:#caa600; color:white; border-radius:5px; text-decoration:none;">Klik Versi Baru ⬇️</a>

        <p style="text-align: justify;">
            Contoh Output : Rp. 10.111.158.939.283  
            (sepuluh triliun seratus sebelas miliar seratus lima puluh delapan juta sembilan ratus tiga puluh sembilan ribu dua ratus delapan puluh tiga rupiah)
        </p>
    </div>

<script>
/* ================================
   FUNGSI SATUAN & TERBILANG
   ================================ */
function satuan(n) {
    return ["", "satu", "dua", "tiga", "empat", "lima",
            "enam", "tujuh", "delapan", "sembilan",
            "sepuluh", "sebelas"][n] || "";
}

function terbilang(n) {
    n = parseInt(n);

    if (n === 0) return "nol";
    if (n < 12) return satuan(n);
    if (n < 20) return satuan(n - 10) + " belas";
    if (n < 100) return satuan(Math.floor(n / 10)) + " puluh " + terbilang(n % 10);
    if (n < 200) return "seratus " + terbilang(n - 100);
    if (n < 1000) return satuan(Math.floor(n / 100)) + " ratus " + terbilang(n % 100);

    const units = ["", "ribu", "juta", "miliar", "triliun"];
    for (let i = 1; i < units.length; i++) {
        let batas = Math.pow(1000, i);
        let nextBatas = Math.pow(1000, i + 1);
        if (n < nextBatas) {
            return `${terbilang(Math.floor(n / batas))} ${units[i]} ${terbilang(n % batas)}`.trim();
        }
    }
}

/* ================================
   FUNGSI ALERT OTOMATIS
   ================================ */
function showAlert(msg, type="success") {
    // Hapus alert sebelumnya
    $("#alertArea").html("");

    let alertBox = `
        <div class="alert alert-${type} alert-dismissible fade show" role="alert">
            ${msg}
        </div>
    `;

    $("#alertArea").html(alertBox);

    // Auto close 2.5 detik
    setTimeout(() => {
        $(".alert").alert('close');
    }, 2500);
}


/* ================================
   FORM INTERACTION
   ================================ */
$(document).ready(function(){

    $('#convertForm').on('submit', function(e){
        e.preventDefault();

        let number = $('#number').val().replace(/[,\.]/g, "");

        if (!/^\d+$/.test(number)) {
            showAlert("Masukkan angka yang valid!", "danger");
            return;
        }

        $('#result').html("(" + terbilang(number) + " rupiah)");
        $('#copyButton').show();
    });


    // COPY BUTTON
    $('#copyButton').on('click', function(){
        let text = $('#result').text();
        navigator.clipboard.writeText(text).then(() => {
            showAlert("Tersalin! Gunakan CTRL + V untuk menempel.");
        });
    });


    // RESET BUTTON
    $('#resetButton').on('click', function(){
        $('#convertForm')[0].reset();
        $('#result').html("");
        $('#copyButton').hide();
    });

});
</script>

</body>
</html>
